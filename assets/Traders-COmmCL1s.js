import{r as a,l as f,j as t}from"./index-frYVYmaC.js";const C=()=>{const[x,g]=a.useState([{id:1,name:"John Farmington",specialty:"Wheat",online:!0},{id:2,name:"Sarah AgriCorp",specialty:"Corn",online:!1},{id:3,name:"Mike Grains Ltd",specialty:"Soybeans",online:!0}]),[h,d]=a.useState([]),[o,l]=a.useState(""),[r,u]=a.useState(null),[i,m]=a.useState(null);a.useEffect(()=>{const e=f("http://localhost:3001");return m(e),()=>e.disconnect()},[]),a.useEffect(()=>{i&&(i.on("message",e=>{d(n=>[...n,e])}),i.on("traderStatus",e=>{g(n=>n.map(p=>p.id===e.id?e:p))}))},[i]);const c=()=>{if(!o.trim()||!r)return;const e={sender:"You",text:o,timestamp:new Date().toLocaleTimeString(),traderId:r.id};i.emit("sendMessage",{...e,sender:"CurrentUserId",recipient:r.id}),d(n=>[...n,e]),l("")};return t.jsxs("div",{style:s.container,children:[t.jsx("h1",{style:s.header,children:"Trader Network"}),t.jsxs("div",{style:s.traderChatContainer,children:[t.jsxs("div",{style:s.traderList,children:[t.jsx("h3",{style:s.subHeader,children:"Available Traders"}),x.map(e=>t.jsxs("div",{style:{...s.traderCard,backgroundColor:(r==null?void 0:r.id)===e.id?"#f0f0f0":"white"},onClick:()=>u(e),children:[t.jsxs("div",{style:s.traderInfo,children:[t.jsx("span",{style:s.traderName,children:e.name}),t.jsx("span",{style:s.traderSpecialty,children:e.specialty})]}),t.jsxs("div",{style:s.statusIndicator,children:[t.jsx("div",{style:{...s.statusDot,backgroundColor:e.online?"#4CAF50":"#e0e0e0"}}),t.jsx("span",{children:e.online?"Online":"Offline"})]})]},e.id))]}),t.jsx("div",{style:s.chatArea,children:r?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:s.chatHeader,children:[t.jsxs("h3",{children:["Chat with ",r.name]}),t.jsxs("span",{style:s.specialtyBadge,children:[r.specialty," trader"]})]}),t.jsx("div",{style:s.messagesContainer,children:h.filter(e=>e.traderId===r.id).map((e,n)=>t.jsxs("div",{style:{...s.message,alignSelf:e.sender==="You"?"flex-end":"flex-start",backgroundColor:e.sender==="You"?"#DCF8C6":"#ECECEC"},children:[t.jsx("div",{style:s.messageText,children:e.text}),t.jsx("div",{style:s.messageTime,children:e.timestamp})]},n))}),t.jsxs("div",{style:s.messageInputContainer,children:[t.jsx("input",{type:"text",value:o,onChange:e=>l(e.target.value),style:s.messageInput,placeholder:"Type your message...",onKeyPress:e=>e.key==="Enter"&&c()}),t.jsx("button",{onClick:c,style:s.sendButton,disabled:!o.trim(),children:"Send"})]})]}):t.jsx("div",{style:s.noTraderSelected,children:t.jsx("p",{children:"Select a trader to start chatting"})})})]})]})},s={container:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},header:{color:"#2c3e50",textAlign:"center",marginBottom:"30px"},traderChatContainer:{display:"flex",height:"70vh",border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden"},traderList:{width:"300px",borderRight:"1px solid #e0e0e0",overflowY:"auto",backgroundColor:"#f9f9f9"},subHeader:{padding:"15px",margin:0,backgroundColor:"#4CAF50",color:"white"},traderCard:{padding:"15px",borderBottom:"1px solid #e0e0e0",cursor:"pointer",transition:"background-color 0.2s",":hover":{backgroundColor:"#f0f0f0"}},traderInfo:{marginBottom:"10px"},traderName:{fontWeight:"bold",display:"block",marginBottom:"5px"},traderSpecialty:{fontSize:"0.9rem",color:"#666"},statusIndicator:{display:"flex",alignItems:"center",fontSize:"0.8rem"},statusDot:{width:"10px",height:"10px",borderRadius:"50%",marginRight:"5px"},chatArea:{flex:1,display:"flex",flexDirection:"column"},chatHeader:{padding:"15px",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},specialtyBadge:{backgroundColor:"#FFC107",color:"#333",padding:"3px 8px",borderRadius:"12px",fontSize:"0.8rem"},messagesContainer:{flex:1,padding:"15px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"10px"},message:{maxWidth:"70%",padding:"10px 15px",borderRadius:"15px",display:"flex",flexDirection:"column"},messageText:{marginBottom:"5px"},messageTime:{fontSize:"0.7rem",color:"#666",alignSelf:"flex-end"},messageInputContainer:{display:"flex",padding:"15px",borderTop:"1px solid #e0e0e0"},messageInput:{flex:1,padding:"10px",border:"1px solid #e0e0e0",borderRadius:"4px",marginRight:"10px"},sendButton:{backgroundColor:"#4CAF50",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",":disabled":{backgroundColor:"#a5d6a7",cursor:"not-allowed"}},noTraderSelected:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",color:"#666"}};export{C as default};
